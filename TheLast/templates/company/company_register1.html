<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>欢迎页面-X-admin2.0</title>
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width,user-scalable=yes, minimum-scale=0.4, initial-scale=0.8,target-densitydpi=low-dpi" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
    <link rel="stylesheet" href="/static/css/font.css">
    <link rel="stylesheet" href="/static/css/xadmin.css">
    <script type="text/javascript" src="https://cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script>
    <script type="text/javascript" src="/static/lib/layui/layui.js" charset="utf-8"></script>
    <script type="text/javascript" src="/static/js/xadmin.js"></script>

    <script type="text/javascript">



     $(function () {

         $("#username").blur(function () { // 地址框失去鼠标焦点
             var txt_value = $(this).val(); // 得到当前文本框的值
             if (txt_value == "") {
                 // 如果符合条件，则设置内容
             }
             else {
                 $.ajax({
                     type: "POST",
                     url: "/company/checkUname/",
                     data: {username: txt_value, csrfmiddlewaretoken: '{{ csrf_token  }}'},
                     dataType: "json",
                     success: function (data) {

                         if (data.msg == "用户名已存在！") {
                             layer.alert("用户名已存在！");
                             $("#username").val("");
                         }
                         else {

                         }
                     }
                 })
             }
         });


         $("#password2").blur(function () { // 地址框获得鼠标焦点


             var txt_value2 = $(this).val(); // 得到当前文本框的值
             var txt_value = $('#password').val();
             if (txt_value2 == txt_value || txt_value == "" || txt_value2 == "") {
                 // 如果符合条件，则清空文本框内容
             }
             else {
                 layer.alert("两次输入密码不一致！");
                 $(this).val("");
                 $('#password').val("");
             }
         });


         $("#danweimingcheng").blur(function () { // 地址框获得鼠标焦点

             var txt_value = $(this).val(); // 得到当前文本框的值
             if (txt_value == "") {
                 // 如果符合条件，则设置内容
             }
             else {
                 $.ajax({
                     type: "POST",
                     url: "/company/checkUname/",
                     data: {danweimingcheng: txt_value, csrfmiddlewaretoken: '{{ csrf_token  }}'},
                     dataType: "json",
                     success: function (data) {

                         if (data.msg == "单位名称已存在！") {
                             layer.alert("单位名称已存在！");
                             $("#danweimingcheng").val("");
                         }
                         else {

                         }
                     }
                 })
             }
         });

         $("#zuzhijigoudaima").blur(function () { // 地址框获得鼠标焦点


             var txt_value = $(this).val(); // 得到当前文本框的值
             if (txt_value == "") {
                 // 如果符合条件，则设置内容
             }
             else {
                 $.ajax({
                     type: "POST",
                     url: "/company/checkUname/",
                     data: {zuzhijigoudaima: txt_value, csrfmiddlewaretoken: '{{ csrf_token  }}'},
                     dataType: "json",
                     success: function (data) {

                         if (data.msg == "组织机构代码已存在！") {
                             layer.alert("组织机构代码已存在！");
                             $("#zuzhijigoudaima").val("");
                         }
                         else {

                         }
                     }
                 })
             }

         });
     });










</script>
</head>
<body class="login-bg">
    
    <div class="login">
        <div class="message">信息注册</div>
        <div id="darkbannerwrap"></div>
        
        <form class="layui-form" method="post" action="/company/register2/">
            {% csrf_token %}
            <input id="username" name="username"  autocomplete="off"   placeholder="用户名"  type="text" lay-verify="required" class="layui-input" >
            <hr class="hr15">
            <input id="password" name="password" lay-verify="required" placeholder="密码"  type="password" class="layui-input">
            <hr class="hr15">
            <input id="password2" name="password2" lay-verify="required" placeholder="确认密码"  type="password" class="layui-input">
            <hr class="hr15">
            <input id="danweimingcheng"  name="danweimingcheng" lay-verify="required" placeholder="单位名称"  type="text" class="layui-input">
            <hr class="hr15">
            <input id="zuzhijigoudaima" name="zuzhijigoudaima" lay-verify="required" placeholder="组织机构代码"  type="password" class="layui-input">
            <hr class="hr15">
            <input value="下一步" class="layui-btn" lay-submit lay-filter="xiayibu" style="width:100%;" type="submit">
            <hr class="hr20" >
        </form>
    </div>
    
</body>
<script>
    layui.use('form',function(){
		var form = layui.form;

        form.on('submit(xiayibu)', function (data) {

        })


	});

</script>
</html>